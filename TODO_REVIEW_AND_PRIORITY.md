# TODO μ£Όμ„ μ •λ¦¬ λ° μ°μ„ μμ„

## π“‹ κ°μ”

ν”„λ΅μ νΈ λ‚΄ λ¨λ“  TODO μ£Όμ„μ„ μ •λ¦¬ν•κ³  μ°μ„ μμ„λ¥Ό κ²°μ •ν• λ¬Έμ„μ…λ‹λ‹¤.

**κ²€ν†  μΌμ**: 2025-01-XX  
**μ΄ TODO κ°μ**: 8κ°

---

## π― μ°μ„ μμ„ κΈ°μ¤€

### λ†’μ€ μ°μ„ μμ„ (P0)
- ν•µμ‹¬ κΈ°λ¥ κµ¬ν„
- λ³΄μ• κ΄€λ ¨
- μ‚¬μ©μ κ²½ν—μ— μ§μ ‘ μν–¥

### μ¤‘κ°„ μ°μ„ μμ„ (P1)
- νƒ€μ… μ•μ •μ„± κ°μ„ 
- μ½”λ“ ν’μ§ ν–¥μƒ
- κΈ°λ¥ μ™„μ„±λ„ ν–¥μƒ

### λ‚®μ€ μ°μ„ μμ„ (P2)
- λ¦¬ν©ν† λ§
- μµμ ν™”
- ν–¥ν›„ κ°μ„  μ‚¬ν•­

---

## π“ TODO λ©λ΅

### P0: λ†’μ€ μ°μ„ μμ„

#### 1. μ΄λ©”μΌ λ³€κ²½ κΈ°λ¥ κµ¬ν„
**νμΌ**: `src/app/(home)/my/account/security/SecurityClient.tsx`  
**λΌμΈ**: 53  
**ν„μ¬ μƒνƒ**: UIλ” μμΌλ‚ κΈ°λ¥ λ―Έκµ¬ν„  
**μ‘μ—… λ‚΄μ©**:
```typescript
// TODO: μ΄λ©”μΌ λ³€κ²½ λ΅μ§ κµ¬ν„ (Supabase Authμ updateUser μ‚¬μ©)
const handleEmailUpdate = async () => {
  // Supabase Authμ updateUser λ©”μ„λ“ μ‚¬μ©
  // μ΄λ©”μΌ μΈμ¦ ν•„μ” (Supabaseλ” μ΄λ©”μΌ λ³€κ²½ μ‹ μΈμ¦ μ΄λ©”μΌ λ°μ†΅)
}
```

**μμƒ μ†μ” μ‹κ°„**: 2-3μ‹κ°„  
**μμ΅΄μ„±**: μ—†μ  
**λΉ„κ³ **: μ‚¬μ©μ κ³„μ • κ΄€λ¦¬μ ν•µμ‹¬ κΈ°λ¥

---

#### 2. κ²°μ  μμ•½ μ‹¤ν¨ μ‹ μ¬μ‹λ„ λ΅μ§
**νμΌ**: `src/app/api/subscription-v2/register/route.ts`  
**λΌμΈ**: 176  
**ν„μ¬ μƒνƒ**: μ—λ¬ λ΅κ·Έλ§ λ‚¨κΈ°κ³  μ¬μ‹λ„ μ—†μ  
**μ‘μ—… λ‚΄μ©**:
```typescript
// TODO: μ‹¤ν¨ μ‹ μ¬μ‹λ„ λ΅μ§ μ¶”κ°€ (μ: cron job λλ” λ³„λ„ ν)
.catch((error: any) => {
  // λΉ„λ™κΈ° μ‘μ—…μ΄λ―€λ΅ μ—λ¬λ” λ΅κ·Έλ§ λ‚¨κΈ°κ³  μ‚¬μ©μμ—κ²λ” μν–¥ μ—†μ
  console.error('κ²°μ  μμ•½ μ‹¤ν¨ (λΉ„λ™κΈ°):', error)
  // μ¬μ‹λ„ λ΅μ§ μ¶”κ°€ ν•„μ”:
  // 1. μ‹¤ν¨ν• κ²°μ  μμ•½μ„ λ³„λ„ ν…μ΄λΈ”μ— μ €μ¥
  // 2. Cron jobμΌλ΅ μ£ΌκΈ°μ μΌλ΅ μ¬μ‹λ„
  // 3. λλ” ν μ‹μ¤ν… μ‚¬μ© (μ: Bull, BullMQ)
})
```

**μμƒ μ†μ” μ‹κ°„**: 4-6μ‹κ°„  
**μμ΅΄μ„±**: 
- μ¬μ‹λ„ ν…μ΄λΈ” μƒμ„± ν•„μ”
- Vercel Cron Jobs λλ” ν μ‹μ¤ν… μ„¤μ •
**λΉ„κ³ **: κ²°μ  μ‹μ¤ν…μ μ•μ •μ„±μ„ μ„ν•΄ μ¤‘μ”

---

### P1: μ¤‘κ°„ μ°μ„ μμ„

#### 3. ZOD μ¤ν‚¤λ§ λ„μ… - λ¶λ§ν¬ λ©”μ΄μ»¤
**νμΌ**: `src/app/(home)/my/bookmarked-makers/BookMarkedMakerClient.tsx`  
**λΌμΈ**: 18, 32  
**ν„μ¬ μƒνƒ**: μΈν„°νμ΄μ¤λ§ μ •μ, νƒ€μ… κ²€μ¦ μ—†μ  
**μ‘μ—… λ‚΄μ©**:
```typescript
//TODO - ZOD λ°μ
interface Maker { ... }
interface Bookmark { ... }

// ZOD μ¤ν‚¤λ§λ΅ λ³€ν™ ν•„μ”
import { z } from 'zod'

const MakerSchema = z.object({
  username: z.string(),
  main_job: z.array(z.string()).nullable(),
  // ...
})
```

**μμƒ μ†μ” μ‹κ°„**: 1-2μ‹κ°„  
**μμ΅΄μ„±**: ZOD ν¨ν‚¤μ§€ μ„¤μΉ ν•„μ”  
**λΉ„κ³ **: νƒ€μ… μ•μ •μ„± ν–¥μƒ

---

#### 4. ZOD μ¤ν‚¤λ§ λ„μ… - ν€ μ μ•
**νμΌ**: `src/app/(home)/my/team-proposal/TeamProposalClient.tsx`  
**λΌμΈ**: 17, 32, 75  
**ν„μ¬ μƒνƒ**: μΈν„°νμ΄μ¤λ§ μ •μ, ν•„ν„° μ—°λ™ λ―Έμ™„λ£  
**μ‘μ—… λ‚΄μ©**:
```typescript
//TODO - ZOD λ°μ
interface Maker { ... }
interface Bookmark { ... }

// ν•„ν„° μ—°λ™λ„ μ™„λ£ ν•„μ” (λΌμΈ 75)
}, [filters]) // TODO ν•„ν„° μ—°λ™
```

**μμƒ μ†μ” μ‹κ°„**: 2-3μ‹κ°„  
**μμ΅΄μ„±**: ZOD ν¨ν‚¤μ§€ μ„¤μΉ ν•„μ”  
**λΉ„κ³ **: νƒ€μ… μ•μ •μ„± ν–¥μƒ + ν•„ν„° κΈ°λ¥ μ™„μ„±

---

#### 5. ZOD μ¤ν‚¤λ§ λ„μ… - λ©”μ΄μ»¤ κ²€μƒ‰
**νμΌ**: `src/app/(home)/search-makers/SearchMakersClient.tsx`  
**λΌμΈ**: 17  
**ν„μ¬ μƒνƒ**: μΈν„°νμ΄μ¤λ§ μ •μ, μ¤‘λ³µ μ½”λ“ μ΅΄μ¬  
**μ‘μ—… λ‚΄μ©**:
```typescript
//TODO - μ¤‘λ¶ μ¶”μ¶ / ZOD λ°μμ
interface Maker { ... }

// 1. Maker μΈν„°νμ΄μ¤λ¥Ό κ³µν†µ νƒ€μ…μΌλ΅ μ¶”μ¶
// 2. ZOD μ¤ν‚¤λ§λ΅ λ³€ν™
```

**μμƒ μ†μ” μ‹κ°„**: 2-3μ‹κ°„  
**μμ΅΄μ„±**: 
- κ³µν†µ νƒ€μ… νμΌ μƒμ„± ν•„μ”
- ZOD ν¨ν‚¤μ§€ μ„¤μΉ ν•„μ”
**λΉ„κ³ **: μ½”λ“ μ¤‘λ³µ μ κ±° + νƒ€μ… μ•μ •μ„±

---

#### 6. ZOD μ¤ν‚¤λ§ λ„μ… - κ²€μƒ‰ λ©”μ΄μ»¤ μΉ΄λ“
**νμΌ**: `src/components/SearchMakerCard.tsx`  
**λΌμΈ**: 4  
**ν„μ¬ μƒνƒ**: μΈν„°νμ΄μ¤λ§ μ •μ  
**μ‘μ—… λ‚΄μ©**:
```typescript
//TODO - ZOD λ°μ
interface Maker { ... }

// κ³µν†µ Maker νƒ€μ… μ‚¬μ© + ZOD μ¤ν‚¤λ§ μ μ©
```

**μμƒ μ†μ” μ‹κ°„**: 1μ‹κ°„  
**μμ΅΄μ„±**: κ³µν†µ νƒ€μ… νμΌ ν•„μ”  
**λΉ„κ³ **: νƒ€μ… μ•μ •μ„± ν–¥μƒ

---

#### 7. ν¬νΈν΄λ¦¬μ¤ ν…μ΄λΈ” νƒ€μ… μ •μ
**νμΌ**: `src/app/(home)/my/profile/portfolio/PortfolioClient.tsx`  
**λΌμΈ**: 81  
**ν„μ¬ μƒνƒ**: `any` νƒ€μ… μ‚¬μ© μ¤‘  
**μ‘μ—… λ‚΄μ©**:
```typescript
// TODO: account_portfolios ν…μ΄λΈ”μ„ νƒ€μ… μ •μμ— μ¶”κ°€ ν•„μ”
const { data, error } = await (supabase as any)
  .from('account_portfolios')
  .select('*')

// src/types/supabase.tsμ— account_portfolios νƒ€μ… μ¶”κ°€
```

**μμƒ μ†μ” μ‹κ°„**: 30λ¶„-1μ‹κ°„  
**μμ΅΄μ„±**: Supabase νƒ€μ… μƒμ„± ν•„μ”  
**λΉ„κ³ **: νƒ€μ… μ•μ •μ„± ν–¥μƒ

---

### P2: λ‚®μ€ μ°μ„ μμ„

#### 8. κ²¬μ μ„ μ—°λ½μ² μ •λ³΄ μ—°λ™
**νμΌ**: `src/app/(home)/my/estimates-dashboard/EstimatesDashboardClient.tsx`  
**λΌμΈ**: 333  
**ν„μ¬ μƒνƒ**: DB μ¤ν‚¤λ§ λ³€κ²½ λ€κΈ° μ¤‘  
**μ‘μ—… λ‚΄μ©**:
```typescript
// TODO: counsel ν…μ΄λΈ”μ— contact_phone, contact_email μ»¬λΌμ΄ μ¶”κ°€λλ©΄ μ—°λ™ ν•„μ”
setContactInfo({
  phone: '', // counsel.contact_phone
  email: '', // counsel.contact_email
})
```

**μμƒ μ†μ” μ‹κ°„**: 1μ‹κ°„  
**μμ΅΄μ„±**: 
- DB λ§μ΄κ·Έλ μ΄μ… ν•„μ” (counsel ν…μ΄λΈ”μ— μ»¬λΌ μ¶”κ°€)
- μ¤ν‚¤λ§ λ³€κ²½ ν›„ μ‘μ—… κ°€λ¥
**λΉ„κ³ **: DB μ¤ν‚¤λ§ λ³€κ²½μ΄ μ„ ν–‰λμ–΄μ•Ό ν•¨

---

## π“ μ°μ„ μμ„λ³„ μ”μ•½

### P0 (μ¦‰μ‹ μ²λ¦¬)
1. β… μ΄λ©”μΌ λ³€κ²½ κΈ°λ¥ κµ¬ν„
2. β… κ²°μ  μμ•½ μ‹¤ν¨ μ‹ μ¬μ‹λ„ λ΅μ§

**μμƒ μ΄ μ†μ” μ‹κ°„**: 6-9μ‹κ°„

### P1 (λ‹¨κΈ° μ²λ¦¬)
3. β… ZOD μ¤ν‚¤λ§ λ„μ… (λ¶λ§ν¬ λ©”μ΄μ»¤)
4. β… ZOD μ¤ν‚¤λ§ λ„μ… (ν€ μ μ•)
5. β… ZOD μ¤ν‚¤λ§ λ„μ… (λ©”μ΄μ»¤ κ²€μƒ‰)
6. β… ZOD μ¤ν‚¤λ§ λ„μ… (κ²€μƒ‰ λ©”μ΄μ»¤ μΉ΄λ“)
7. β… ν¬νΈν΄λ¦¬μ¤ ν…μ΄λΈ” νƒ€μ… μ •μ

**μμƒ μ΄ μ†μ” μ‹κ°„**: 8-12μ‹κ°„

### P2 (μ¤‘κΈ° μ²λ¦¬)
8. β… κ²¬μ μ„ μ—°λ½μ² μ •λ³΄ μ—°λ™

**μμƒ μ΄ μ†μ” μ‹κ°„**: 1μ‹κ°„ (DB μ¤ν‚¤λ§ λ³€κ²½ ν›„)

---

## π€ μ‹¤ν–‰ κ³„ν

### 1λ‹¨κ³„: P0 μ‘μ—… (1μ£Ό)
- [ ] μ΄λ©”μΌ λ³€κ²½ κΈ°λ¥ κµ¬ν„
- [ ] κ²°μ  μμ•½ μ‹¤ν¨ μ‹ μ¬μ‹λ„ λ΅μ§

### 2λ‹¨κ³„: P1 μ‘μ—… (2μ£Ό)
- [ ] ZOD ν¨ν‚¤μ§€ μ„¤μΉ λ° κΈ°λ³Έ μ„¤μ •
- [ ] κ³µν†µ νƒ€μ… νμΌ μƒμ„±
- [ ] κ° μ»΄ν¬λ„νΈμ— ZOD μ¤ν‚¤λ§ μ μ©
- [ ] ν¬νΈν΄λ¦¬μ¤ ν…μ΄λΈ” νƒ€μ… μ •μ

### 3λ‹¨κ³„: P2 μ‘μ—… (DB μ¤ν‚¤λ§ λ³€κ²½ ν›„)
- [ ] κ²¬μ μ„ μ—°λ½μ² μ •λ³΄ μ—°λ™

---

## π“¦ ν•„μ”ν• ν¨ν‚¤μ§€

### μ„¤μΉ ν•„μ”
```bash
npm install zod
```

### νƒ€μ… μƒμ„± ν•„μ”
- Supabase νƒ€μ… μ¬μƒμ„± (`supabase gen types typescript`)
- `account_portfolios` ν…μ΄λΈ” νƒ€μ… ν¬ν•¨

---

## π”— κ΄€λ ¨ μ΄μ

κ° TODOλ” λ³„λ„ μ΄μλ΅ λ“±λ΅ν•μ—¬ μ¶”μ ν•λ” κ²ƒμ„ κ¶μ¥ν•©λ‹λ‹¤.

### μ΄μ ν…ν”λ¦Ώ
```markdown
## TODO: [μ λ©]

**νμΌ**: `[νμΌ κ²½λ΅]`  
**λΌμΈ**: [λΌμΈ λ²νΈ]  
**μ°μ„ μμ„**: [P0/P1/P2]  
**μμƒ μ†μ” μ‹κ°„**: [μ‹κ°„]

### μ‘μ—… λ‚΄μ©
[μƒμ„Έ μ„¤λ…]

### μ²΄ν¬λ¦¬μ¤νΈ
- [ ] μ‘μ—… 1
- [ ] μ‘μ—… 2
```

---

## π“ μ°Έκ³  μ‚¬ν•­

### ZOD μ¤ν‚¤λ§ λ„μ… μ‹ κ³ λ ¤μ‚¬ν•­
1. **κ³µν†µ νƒ€μ… νμΌ μƒμ„±**
   - `src/types/maker.ts` - Maker κ΄€λ ¨ νƒ€μ… λ° μ¤ν‚¤λ§
   - `src/types/bookmark.ts` - Bookmark κ΄€λ ¨ νƒ€μ… λ° μ¤ν‚¤λ§

2. **μ μ§„μ  λ„μ…**
   - ν• λ²μ— λ¨λ“  νμΌμ„ λ³€κ²½ν•μ§€ λ§κ³  λ‹¨κ³„μ μΌλ΅ μ§„ν–‰
   - κ° μ»΄ν¬λ„νΈλ³„λ΅ ν…μ¤νΈ ν›„ λ‹¤μμΌλ΅ μ§„ν–‰

3. **κΈ°μ΅΄ μΈν„°νμ΄μ¤ μ μ§€**
   - ZOD μ¤ν‚¤λ§μ—μ„ TypeScript νƒ€μ… μ¶”μ¶ (`z.infer<typeof Schema>`)
   - κΈ°μ΅΄ μΈν„°νμ΄μ¤μ™€ νΈν™μ„± μ μ§€

### κ²°μ  μ¬μ‹λ„ λ΅μ§ μ„¤κ³„
1. **μ¬μ‹λ„ ν…μ΄λΈ” μƒμ„±**
   ```sql
   CREATE TABLE payment_retry_queue (
     id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
     subscription_id UUID REFERENCES subscriptions(id),
     payment_id TEXT,
     scheduled_at TIMESTAMP,
     retry_count INT DEFAULT 0,
     max_retries INT DEFAULT 5,
     status TEXT DEFAULT 'pending',
     error_message TEXT,
     created_at TIMESTAMP DEFAULT NOW(),
     updated_at TIMESTAMP DEFAULT NOW()
   );
   ```

2. **Cron Job μ„¤μ •**
   - Vercel Cron Jobs μ‚¬μ©
   - λ§¤ μ‹κ°„λ§λ‹¤ μ‹¤ν¨ν• κ²°μ  μμ•½ μ¬μ‹λ„

---

**μ‘μ„±μΌ**: 2025-01-XX  
**μ‘μ„±μ**: AI Assistant  
**λ²„μ „**: 1.0

