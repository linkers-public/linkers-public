# `/my/company/estimates` 페이지 검토 결과

## 📋 현재 상태

### ✅ 잘 구현된 기능

1. **프로젝트별 그룹화**: 견적서를 프로젝트(counsel)별로 그룹화하여 표시
2. **뷰 모드 전환**: "프로젝트별" / "전체 보기" 모드 제공
3. **검색 및 필터**: 프로젝트명, 팀명, 내용으로 검색, 상태별 필터링
4. **견적서 상세**: 선택한 견적서의 상세 정보 표시
5. **열람 권한 관리**: MVP 요구사항에 따라 무료/구독/건별 결제 열람 기능 구현
6. **견적서 수락/보류**: pending 상태의 견적서에 대해 수락/보류 기능
7. **접근성**: 키보드 네비게이션, ARIA 속성 등 접근성 고려

### ⚠️ 문제점 및 개선 필요 사항

#### 1. 사용되지 않는 코드

**문제:**
- `compareMode`, `compareEstimates` state가 선언되었지만 실제 비교 UI가 없음
- `handleVersionCompare` 함수는 "비교" 버튼에서 호출되지만 실제 비교 기능이 구현되지 않음
- 여러 아이콘이 import되었지만 사용되지 않음:
  - `CheckCircle`, `Clock`, `XCircle`, `MessageSquare`, `GitCompare`, `ArrowRight`, `Filter`, `Grid3x3`, `List`

**영향:**
- 코드 복잡도 증가
- 유지보수 어려움
- 사용자 혼란 (비교 버튼이 있지만 작동하지 않음)

**권장 조치:**
- MVP 범위에 비교 기능이 없다면 "비교" 버튼 제거
- 사용되지 않는 import 정리

#### 2. 기능적 문제

**문제:**
- "비교" 버튼이 있지만 실제 비교 기능이 없음
- 전체 보기 모드에서 견적서를 클릭하면 프로젝트별 모드로 전환되는데, 이게 직관적이지 않을 수 있음

**권장 조치:**
- 비교 기능이 MVP 범위에 없다면 제거
- 전체 보기 모드에서 견적서 클릭 시 모달이나 사이드 패널로 상세 표시 고려

#### 3. UI/UX 개선 사항

**문제:**
1. **견적서 상세 영역**: 프로젝트별 모드에서 오른쪽 상세 영역이 항상 표시되는데, 선택된 견적서가 없을 때 빈 화면이 표시됨
2. **전체 보기 모드**: 카드 형태로 표시되지만, 상세 정보를 보려면 프로젝트별 모드로 전환해야 함
3. **필터 초기화**: 필터가 적용된 상태에서 초기화 버튼이 여러 곳에 분산되어 있음

**권장 조치:**
1. 견적서 상세 영역을 선택적 표시로 변경 (선택된 견적서가 있을 때만 표시)
2. 전체 보기 모드에서도 상세 정보를 모달이나 사이드 패널로 표시
3. 필터 초기화 버튼 위치 통일

#### 4. 데이터 처리

**문제:**
- `estimate_date` 필드가 사용되는데, 이 필드가 estimate 테이블에 존재하는지 확인 필요
- `counsel_id`가 없는 견적서는 경고만 출력하고 건너뛰는데, 이런 경우를 어떻게 처리할지 명확하지 않음

**권장 조치:**
- 데이터 스키마 확인 및 일관성 유지
- `counsel_id`가 없는 견적서에 대한 명확한 처리 방안 수립

#### 5. MVP 범위와의 일치

**현재 MVP 범위:**
- 견적서 열람 (무료/구독/건별 결제)
- 견적서 수락/보류

**MVP 범위 밖:**
- 견적서 비교 기능
- 채팅 기능 (문의 버튼은 있지만 실제 기능 미구현)

**권장 조치:**
- MVP 범위 밖의 기능은 제거하거나 "준비 중" 표시

## 🔧 제안하는 개선 사항

### 우선순위 1: 즉시 수정 필요

1. **사용되지 않는 코드 제거**
   - `compareMode`, `compareEstimates` state 제거
   - `handleVersionCompare` 함수 제거
   - "비교" 버튼 제거
   - 사용되지 않는 import 정리

2. **문의 버튼 처리**
   - MVP 범위에 채팅 기능이 없다면 버튼 제거 또는 "준비 중" 표시

### 우선순위 2: UX 개선

1. **전체 보기 모드 개선**
   - 견적서 카드 클릭 시 모달이나 사이드 패널로 상세 표시
   - 프로젝트별 모드로 강제 전환하지 않음

2. **필터 초기화 통일**
   - 필터 초기화 버튼 위치 통일
   - 필터 적용 시 상단에 고정 표시

3. **빈 상태 개선**
   - 견적서 상세 영역이 비어있을 때 더 명확한 안내 메시지

### 우선순위 3: 코드 정리

1. **데이터 처리 개선**
   - `counsel_id`가 없는 견적서에 대한 명확한 처리
   - `estimate_date` 필드 존재 여부 확인

2. **타입 안정성**
   - TypeScript 타입 정의 개선
   - null 체크 강화

## 📊 코드 통계

- **총 라인 수**: ~1,033줄
- **사용되지 않는 state**: 2개 (`compareMode`, `compareEstimates`)
- **사용되지 않는 함수**: 1개 (`handleVersionCompare`)
- **사용되지 않는 import**: 8개 이상
- **MVP 범위 밖 기능**: 비교 기능, 채팅 기능

## ✅ 결론

현재 페이지는 기본 기능은 잘 구현되어 있지만, 사용되지 않는 코드와 MVP 범위 밖의 기능이 포함되어 있습니다. 우선순위에 따라 정리하면 코드 품질과 사용자 경험이 개선될 것입니다.

